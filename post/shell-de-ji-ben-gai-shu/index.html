<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" >

<title>shell的基本概述 | Just FOR 1998</title>
<meta name="description" content="LOVE YOURSELF">

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="shortcut icon" href="https://zjy98.github.io/favicon.ico?v=1590922441709">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://zjy98.github.io/styles/main.css">



<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>

<link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />



  </head>
  <body>
    <div id="app" class="main">

      <div class="sidebar" :class="{ 'full-height': menuVisible }">
  <div class="top-container" data-aos="fade-right">
    <div class="top-header-container">
      <a class="site-title-container" href="https://zjy98.github.io">
        <img src="https://zjy98.github.io/images/avatar.png?v=1590922441709" class="site-logo">
        <h1 class="site-title">Just FOR 1998</h1>
      </a>
      <div class="menu-btn" @click="menuVisible = !menuVisible">
        <div class="line"></div>
      </div>
    </div>
    <div>
      
        
          <a href="/" class="site-nav">
            首页
          </a>
        
      
        
          <a href="/archives" class="site-nav">
            文章
          </a>
        
      
        
          <a href="/tags" class="site-nav">
            标签
          </a>
        
      
        
          <a href="/post/about" class="site-nav">
            关于
          </a>
        
      
    </div>
  </div>
  <div class="bottom-container" data-aos="flip-up" data-aos-offset="0">
    <div class="social-container">
      
        
          <a class="social-link" href="https://github.com/zjy98" target="_blank">
            <i class="fab fa-github"></i>
          </a>
        
      
        
      
        
      
        
      
        
      
    </div>
    <div class="site-description">
      LOVE YOURSELF
    </div>
    <div class="site-footer">
      Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | <a class="rss" href="https://zjy98.github.io/atom.xml" target="_blank">RSS</a>
    </div>
  </div>
</div>


      <div class="main-container">
        <div class="content-container" data-aos="fade-up">
          <div class="post-detail">
            <h2 class="post-title">shell的基本概述</h2>
            <div class="post-date">2020-04-19</div>
            
            <div class="post-content">
              <h1 id="shell概述">shell概述</h1>
<h2 id="shell的种类">shell的种类</h2>
<p>c-shell :/bin/csh由加利福尼亚大学的William N.joy在20世纪70年代开发<br>
k-shell:1986年开发<br>
b-shell:/bin/bash，吸收了Cshell的某些特点。<br>
bash等</p>
<h2 id="shell的功能">shell的功能</h2>
<p>shell是命令解释器<br>
文件名替换，命令替换，变量替换<br>
历史替换，别名替换<br>
流程控制的内部命令（内部命令和外部命令）<br>
主要用途：批处理，执行效率比算法语言低<br>
shell编程风格和C语言等算法语言的区别：shell是面向命令处理的语言，提供的流程控制结构通过对一些内部命令的解释实现<br>
策略与机制相分离，shell许多灵活的功能，通过shell替换实现</p>
<h1 id="bash">bash</h1>
<p>启动bash:3种方法<br>
注册shell<br>
键入bash命令（交互式shell)<br>
脚本解释器<br>
<img src="https://zjy98.github.io/post-images/1587375802636.png" alt="" loading="lazy"><br>
<img src="https://zjy98.github.io/post-images/1587375828380.png" alt="" loading="lazy"></p>
<h1 id="脚本文件">脚本文件</h1>
<p>编辑文件lsdir(格式为文本文件，文件名不必须为.sh后缀，只是个惯例)<br>
<img src="https://zjy98.github.io/post-images/1587375881462.png" alt="" loading="lazy"><br>
执行：</p>
<ol>
<li>新创建子进程，并在子进程中执行脚本<br>
bash&lt; lsdir<br>
无法携带命令行参数<br>
bash lsdir可以带参数<br>
bash -x lsdir 执行一行打出一行内容<br>
bash lsdir /usr/lib/gcc    debug调试<br>
给文件设置可执行属性x：chmod u+x lsdir<br>
然后执行 ./lsdir /usr/lib/gcc<br>
三种方法均启动程序/bin/bash 生成新进程</li>
<li>在当前shell进程中执行脚本<br>
. lsdir /usr/lib/gcc<br>
source lsdir /usr/lib/gcc</li>
</ol>
<h1 id="历史与别名">历史与别名</h1>
<p>· 历史表大小<br>
先前键入的命令存于历史表，编号递增，FIFO刷新<br>
表大小由变量HISTSIZE设定<br>
修改HISTSIZE的配置应放入~/.bashrc<br>
查看历史表：内部命令history<br>
文件<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>H</mi><mi>O</mi><mi>M</mi><mi>E</mi><mi mathvariant="normal">/</mi><mi mathvariant="normal">.</mi><mi>b</mi><mi>a</mi><mi>s</mi><msub><mi>h</mi><mi>h</mi></msub><mi>i</mi><mi>s</mi><mi>t</mi><mi>o</mi><mi>r</mi><mi>y</mi><mo separator="true">⋅</mo><mi mathvariant="normal">历</mi><mi mathvariant="normal">史</mi><mi mathvariant="normal">替</mi><mi mathvariant="normal">换</mi><mi mathvariant="normal">人</mi><mi mathvariant="normal">机</mi><mi mathvariant="normal">交</mi><mi mathvariant="normal">互</mi><mi mathvariant="normal">时</mi><mi mathvariant="normal">使</mi><mi mathvariant="normal">用</mi><mi mathvariant="normal">上</mi><mi mathvariant="normal">下</mi><mi mathvariant="normal">箭</mi><mi mathvariant="normal">头</mi><mi mathvariant="normal">，</mi><mi mathvariant="normal">调</mi><mi mathvariant="normal">出</mi><mi mathvariant="normal">之</mi><mi mathvariant="normal">前</mi><mi mathvariant="normal">的</mi><mi mathvariant="normal">命</mi><mi mathvariant="normal">令</mi><mi mathvariant="normal">其</mi><mi mathvariant="normal">他</mi><mi mathvariant="normal">引</mi><mi mathvariant="normal">用</mi><mi mathvariant="normal">方</mi><mi mathvariant="normal">法</mi><mi mathvariant="normal">：</mi><mo>!</mo><mo>!</mo><mi mathvariant="normal">引</mi><mi mathvariant="normal">用</mi><mi mathvariant="normal">上</mi><mi mathvariant="normal">一</mi><mi mathvariant="normal">命</mi><mi mathvariant="normal">令</mi><mo>!</mo><mi>s</mi><mi>t</mi><mi>r</mi><mi mathvariant="normal">以</mi><mi>s</mi><mi>t</mi><mi>r</mi><mi mathvariant="normal">开</mi><mi mathvariant="normal">头</mi><mi mathvariant="normal">的</mi><mi mathvariant="normal">最</mi><mi mathvariant="normal">近</mi><mi mathvariant="normal">用</mi><mi mathvariant="normal">过</mi><mi mathvariant="normal">的</mi><mi mathvariant="normal">命</mi><mi mathvariant="normal">令</mi><mi mathvariant="normal">，</mi><mi mathvariant="normal">如</mi><mo>:</mo><mo>!</mo><mi>v</mi><mo>!</mo><mi>m</mi><mo>!</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">‘</mi><mi mathvariant="normal">别</mi><mi mathvariant="normal">名</mi><mi mathvariant="normal">和</mi><mi mathvariant="normal">别</mi><mi mathvariant="normal">名</mi><mi mathvariant="normal">替</mi><mi mathvariant="normal">换</mi><mi mathvariant="normal">在</mi><mi mathvariant="normal">别</mi><mi mathvariant="normal">名</mi><mi mathvariant="normal">表</mi><mi mathvariant="normal">中</mi><mi mathvariant="normal">增</mi><mi mathvariant="normal">加</mi><mi mathvariant="normal">一</mi><mi mathvariant="normal">个</mi><mi mathvariant="normal">别</mi><mi mathvariant="normal">名</mi><mi mathvariant="normal">：</mi><mi mathvariant="normal">内</mi><mi mathvariant="normal">部</mi><mi mathvariant="normal">命</mi><mi mathvariant="normal">令</mi><mi>a</mi><mi>l</mi><mi>i</mi><mi>a</mi><mi>s</mi><mo>!</mo><mo>[</mo><mo>]</mo><mo>(</mo><mi>h</mi><mi>t</mi><mi>t</mi><mi>p</mi><mi>s</mi><mo>:</mo><mi mathvariant="normal">/</mi><mi mathvariant="normal">/</mi><mi>z</mi><mi>j</mi><mi>y</mi><mn>98.</mn><mi>g</mi><mi>i</mi><mi>t</mi><mi>h</mi><mi>u</mi><mi>b</mi><mi mathvariant="normal">.</mi><mi>i</mi><mi>o</mi><mi mathvariant="normal">/</mi><mi>p</mi><mi>o</mi><mi>s</mi><mi>t</mi><mo>−</mo><mi>i</mi><mi>m</mi><mi>a</mi><mi>g</mi><mi>e</mi><mi>s</mi><mi mathvariant="normal">/</mi><mn>1587390962968.</mn><mi>p</mi><mi>n</mi><mi>g</mi><mo>)</mo><mi mathvariant="normal">如</mi><mi mathvariant="normal">果</mi><mi mathvariant="normal">需</mi><mi mathvariant="normal">要</mi><mi mathvariant="normal">，</mi><mi mathvariant="normal">应</mi><mi mathvariant="normal">把</mi><mi mathvariant="normal">别</mi><mi mathvariant="normal">名</mi><mi mathvariant="normal">存</mi><mi mathvariant="normal">入</mi><mi mathvariant="normal">.</mi><mi>b</mi><mi>a</mi><mi>s</mi><mi>h</mi><mi>r</mi><mi>c</mi><mi mathvariant="normal">‘</mi><mi>T</mi><mi>A</mi><mi>B</mi><mi mathvariant="normal">键</mi><mi mathvariant="normal">补</mi><mi mathvariant="normal">全</mi><mi mathvariant="normal">每</mi><mi mathvariant="normal">行</mi><mi mathvariant="normal">的</mi><mi mathvariant="normal">首</mi><mi mathvariant="normal">个</mi><mi mathvariant="normal">单</mi><mi mathvariant="normal">词</mi><mi>T</mi><mi>A</mi><mi>B</mi><mi mathvariant="normal">键</mi><mi mathvariant="normal">补</mi><mi mathvariant="normal">全</mi><mi mathvariant="normal">搜</mi><mi mathvariant="normal">索</mi></mrow><annotation encoding="application/x-tex">HOME/.bash_history
· 历史替换
人机交互时使用上下箭头，调出之前的命令
其他引用方法：!! 引用上一命令  !str 以str开头的最近用过的命令，如:!v  !m  !.
` 别名和别名替换
在别名表中增加一个别名：内部命令alias
![](https://zjy98.github.io/post-images/1587390962968.png)
如果需要，应把别名存入.bashrc
` TAB键补全
每行的首个单词 TAB键补全搜索</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.08125em;">H</span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mord">/</span><span class="mord">.</span><span class="mord mathdefault">b</span><span class="mord mathdefault">a</span><span class="mord mathdefault">s</span><span class="mord"><span class="mord mathdefault">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">h</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault">i</span><span class="mord mathdefault">s</span><span class="mord mathdefault">t</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mpunct">⋅</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord cjk_fallback">历</span><span class="mord cjk_fallback">史</span><span class="mord cjk_fallback">替</span><span class="mord cjk_fallback">换</span><span class="mord cjk_fallback">人</span><span class="mord cjk_fallback">机</span><span class="mord cjk_fallback">交</span><span class="mord cjk_fallback">互</span><span class="mord cjk_fallback">时</span><span class="mord cjk_fallback">使</span><span class="mord cjk_fallback">用</span><span class="mord cjk_fallback">上</span><span class="mord cjk_fallback">下</span><span class="mord cjk_fallback">箭</span><span class="mord cjk_fallback">头</span><span class="mord cjk_fallback">，</span><span class="mord cjk_fallback">调</span><span class="mord cjk_fallback">出</span><span class="mord cjk_fallback">之</span><span class="mord cjk_fallback">前</span><span class="mord cjk_fallback">的</span><span class="mord cjk_fallback">命</span><span class="mord cjk_fallback">令</span><span class="mord cjk_fallback">其</span><span class="mord cjk_fallback">他</span><span class="mord cjk_fallback">引</span><span class="mord cjk_fallback">用</span><span class="mord cjk_fallback">方</span><span class="mord cjk_fallback">法</span><span class="mord cjk_fallback">：</span><span class="mclose">!</span><span class="mclose">!</span><span class="mord cjk_fallback">引</span><span class="mord cjk_fallback">用</span><span class="mord cjk_fallback">上</span><span class="mord cjk_fallback">一</span><span class="mord cjk_fallback">命</span><span class="mord cjk_fallback">令</span><span class="mclose">!</span><span class="mord mathdefault">s</span><span class="mord mathdefault">t</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord cjk_fallback">以</span><span class="mord mathdefault">s</span><span class="mord mathdefault">t</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord cjk_fallback">开</span><span class="mord cjk_fallback">头</span><span class="mord cjk_fallback">的</span><span class="mord cjk_fallback">最</span><span class="mord cjk_fallback">近</span><span class="mord cjk_fallback">用</span><span class="mord cjk_fallback">过</span><span class="mord cjk_fallback">的</span><span class="mord cjk_fallback">命</span><span class="mord cjk_fallback">令</span><span class="mord cjk_fallback">，</span><span class="mord cjk_fallback">如</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mclose">!</span><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="mclose">!</span><span class="mord mathdefault">m</span><span class="mclose">!</span><span class="mord">.</span><span class="mord">‘</span><span class="mord cjk_fallback">别</span><span class="mord cjk_fallback">名</span><span class="mord cjk_fallback">和</span><span class="mord cjk_fallback">别</span><span class="mord cjk_fallback">名</span><span class="mord cjk_fallback">替</span><span class="mord cjk_fallback">换</span><span class="mord cjk_fallback">在</span><span class="mord cjk_fallback">别</span><span class="mord cjk_fallback">名</span><span class="mord cjk_fallback">表</span><span class="mord cjk_fallback">中</span><span class="mord cjk_fallback">增</span><span class="mord cjk_fallback">加</span><span class="mord cjk_fallback">一</span><span class="mord cjk_fallback">个</span><span class="mord cjk_fallback">别</span><span class="mord cjk_fallback">名</span><span class="mord cjk_fallback">：</span><span class="mord cjk_fallback">内</span><span class="mord cjk_fallback">部</span><span class="mord cjk_fallback">命</span><span class="mord cjk_fallback">令</span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">i</span><span class="mord mathdefault">a</span><span class="mord mathdefault">s</span><span class="mclose">!</span><span class="mopen">[</span><span class="mclose">]</span><span class="mopen">(</span><span class="mord mathdefault">h</span><span class="mord mathdefault">t</span><span class="mord mathdefault">t</span><span class="mord mathdefault">p</span><span class="mord mathdefault">s</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">/</span><span class="mord">/</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mord">9</span><span class="mord">8</span><span class="mord">.</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault">i</span><span class="mord mathdefault">t</span><span class="mord mathdefault">h</span><span class="mord mathdefault">u</span><span class="mord mathdefault">b</span><span class="mord">.</span><span class="mord mathdefault">i</span><span class="mord mathdefault">o</span><span class="mord">/</span><span class="mord mathdefault">p</span><span class="mord mathdefault">o</span><span class="mord mathdefault">s</span><span class="mord mathdefault">t</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">i</span><span class="mord mathdefault">m</span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault">e</span><span class="mord mathdefault">s</span><span class="mord">/</span><span class="mord">1</span><span class="mord">5</span><span class="mord">8</span><span class="mord">7</span><span class="mord">3</span><span class="mord">9</span><span class="mord">0</span><span class="mord">9</span><span class="mord">6</span><span class="mord">2</span><span class="mord">9</span><span class="mord">6</span><span class="mord">8</span><span class="mord">.</span><span class="mord mathdefault">p</span><span class="mord mathdefault">n</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mclose">)</span><span class="mord cjk_fallback">如</span><span class="mord cjk_fallback">果</span><span class="mord cjk_fallback">需</span><span class="mord cjk_fallback">要</span><span class="mord cjk_fallback">，</span><span class="mord cjk_fallback">应</span><span class="mord cjk_fallback">把</span><span class="mord cjk_fallback">别</span><span class="mord cjk_fallback">名</span><span class="mord cjk_fallback">存</span><span class="mord cjk_fallback">入</span><span class="mord">.</span><span class="mord mathdefault">b</span><span class="mord mathdefault">a</span><span class="mord mathdefault">s</span><span class="mord mathdefault">h</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">c</span><span class="mord">‘</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mord cjk_fallback">键</span><span class="mord cjk_fallback">补</span><span class="mord cjk_fallback">全</span><span class="mord cjk_fallback">每</span><span class="mord cjk_fallback">行</span><span class="mord cjk_fallback">的</span><span class="mord cjk_fallback">首</span><span class="mord cjk_fallback">个</span><span class="mord cjk_fallback">单</span><span class="mord cjk_fallback">词</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mord cjk_fallback">键</span><span class="mord cjk_fallback">补</span><span class="mord cjk_fallback">全</span><span class="mord cjk_fallback">搜</span><span class="mord cjk_fallback">索</span></span></span></span>PATH下的命令</p>
<h1 id="输入重定向">输入重定向</h1>
<ol>
<li>&lt; filename<br>
从文件filename中获取stdin 例如sort &lt; telno.txt</li>
<li>&lt;&lt; word<br>
从shell脚本文件获取数据直到再次遇到定界符word<br>
cat &lt;&lt; TOAST（两部分之间的内容是cat的显示内容）<br>
定界符所界定内容的加工处理（等同双引号处理）<br>
变量替换，命令替换<br>
不执行文件名生成<br>
定界符两侧加单引号：不允许定界符之间的内容进行替换操作</li>
<li>&lt;&lt;&lt; word<br>
三个小于号后面的单词内容作为标准输入</li>
</ol>
<h1 id="输出重定向和管道">输出重定向和管道</h1>
<figure data-type="image" tabindex="1"><img src="https://zjy98.github.io/post-images/1587391592960.png" alt="" loading="lazy"></figure>
<ol>
<li>&gt;filename<br>
将stdout重定向到文件filename,文件已存在则先清空（覆盖方式）</li>
<li>&gt;&gt;filename<br>
将stdout重定向追加到文件filename尾</li>
<li>2&gt;filename<br>
将文件句柄2重定向到文件filename<br>
分离stdout与stderr的意义<br>
2&gt;&amp;1 将文件句柄2重定向到文件描述符1指向的文件<br>
允许对除了0,1,2以外其他文件句柄输入或输出重定向，<br>
例如：./myp 5&lt; a.txt  6&gt; b.dat<br>
<img src="https://zjy98.github.io/post-images/1587392097679.png" alt="" loading="lazy"><br>
<img src="https://zjy98.github.io/post-images/1587392131704.png" alt="" loading="lazy"><br>
管道只把标准输出重定向，标准错误没有，要想重定向加入2&gt;&amp;1</li>
</ol>

            </div>
            
              <div class="tag-container">
                
                  <a href="https://zjy98.github.io/tag/dMPwcEgSv/" class="tag">
                    Linux
                  </a>
                
              </div>
            
            
              <div class="next-post">
                <div class="next">下一篇</div>
                <a href="https://zjy98.github.io/post/wen-jian-he-mu-lu-de-quan-xian/">
                  <h3 class="post-title">
                    文件和目录的权限
                  </h3>
                </a>
              </div>
            

            

          </div>

        </div>
      </div>
    </div>

    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>

<script type="application/javascript">

AOS.init();

hljs.initHighlightingOnLoad()

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>




  </body>
</html>
